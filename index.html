<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LPK Tiers - Global Leaderboard</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
:root { --gold: #f5b942; --dark-bg: #0b1220; --card-bg: #141c2f; }
body { margin:0; font-family: Arial, sans-serif; background: var(--dark-bg); color:white; overflow-x: hidden; }
header { padding: 20px; font-size: 28px; font-weight: bold; text-align: center; }

/* Tabs Navigation */
.tabs { display: flex; gap: 10px; padding: 0 20px 20px; overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; }
.tab { background: var(--card-bg); padding: 10px 15px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; gap: 8px; flex-shrink: 0; border: 1px solid transparent; }
.tab img { width: 20px; height: 20px; }
.tab.active { background: var(--gold); color: black; font-weight: bold; }

/* Leaderboard Container */
.container { padding: 10px; max-width: 1000px; margin: auto; }
.player { display: flex; align-items: center; background: var(--card-bg); margin-bottom: 12px; border-radius: 6px; overflow: hidden; height: 80px; }
.rank-box { background: var(--gold); color: black; width: 60px; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; font-style: italic; }

.content-area { display: flex; flex: 1; align-items: center; padding: 0 15px; gap: 15px; overflow: hidden; }
.skin { width: 50px; height: 50px; border-radius: 4px; background: #222; }
.info-text { flex: 1; min-width: 120px; }
.name-line { font-size: 18px; font-weight: bold; margin-bottom: 2px; }
.title-line { font-size: 13px; color: var(--gold); }

/* FIXED ICON ROW BUG */
.tier-icons-row { display: flex; gap: 10px; align-items: center; flex-wrap: nowrap; margin-left: auto; }
.icon-unit { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 45px; }
.icon-unit img { width: 22px; height: 22px; object-fit: contain; margin-bottom: 4px; }
.icon-unit span { font-size: 10px; font-weight: bold; text-align: center; }

/* Admin UI */
.admin-login-btn { position: fixed; top: 20px; right: 20px; background: #3b82f6; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; z-index: 9999; }
.admin-panel { position: fixed; bottom: 20px; right: 20px; left: 20px; background: var(--card-bg); padding: 16px; border-radius: 14px; display: none; border: 2px solid var(--gold); z-index: 10000; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
input, select { padding: 10px; margin: 6px 0; border-radius: 8px; border: 1px solid #333; width: 100%; box-sizing: border-box; background: #0b1220; color: white; }
.btn-save { background: #4CAF50; color: white; width: 100%; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 10px; }
</style>
</head>
<body>

<header>üèÜ LPK Tiers Leaderboard</header>
<button class="admin-login-btn" id="adminBtn">Admin</button>
<div class="tabs" id="tabs"></div>
<div class="container" id="leaderboard">Loading rankings...</div>

<div class="admin-panel" id="adminPanel">
    <div id="loginArea">
        <b>Admin Access</b>
        <input type="password" id="adminPassword" placeholder="Enter password">
        <button class="btn-save" onclick="login()">Login</button>
    </div>
    <div id="adminControls" style="display:none;">
        <b id="editingLabel">Editing Mode: Overall</b>
        <input id="targetName" placeholder="Minecraft Username">
        <select id="tierSelector">
            <option value="Unranked">Unranked (0)</option>
            <option value="HT1">HT1 (60)</option><option value="LT1">LT1 (45)</option>
            <option value="HT2">HT2 (30)</option><option value="LT2">LT2 (20)</option>
            <option value="HT3">HT3 (10)</option><option value="LT3">LT3 (6)</option>
            <option value="HT4">HT4 (4)</option><option value="LT4">LT4 (3)</option>
            <option value="HT5">HT5 (2)</option><option value="LT5">LT5 (1)</option>
        </select>
        <input id="manualPoints" type="number" placeholder="Add Bonus Points (Overall only)" style="display:none;">
        <button class="btn-save" onclick="updatePlayerData()">Save to Cloud</button>
    </div>
</div>

<script>
// YOUR CONFIGURATION
const firebaseConfig = {
  apiKey: "AIzaSyDqCFNf8Y0373eYUr-Sexy4Qm91R_wv2lN",
  authDomain: "lpk-tiers.firebaseapp.com",
  databaseURL: "https://lpk-tiers-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "lpk-tiers",
  storageBucket: "lpk-tiers.firebasestorage.app",
  messagingSenderId: "1039213934246",
  appId: "1:1039213934246:web:ce4bd381d96154e4d56667"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const modesConfig = {
    "Overall": "https://minecraft.wiki/images/Nether_Star_JE3_BE2.png",
    "LTMs": "https://minecraft.wiki/images/Clock_JE3_BE3.gif",
    "Vanilla": "https://minecraft.wiki/images/Grass_Block_JE7_BE6.png",
    "UHC": "
